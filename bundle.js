!function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function i(){return[750,Math.floor(500*Math.random())]}s.r(t);var r=class{constructor(e){this.pos=e.pos,this.vel=e.vel,this.radius=e.radius,this.color=e.color,this.game=e.game}draw(e){e.fillStyle=this.color,e.beginPath(),e.arc(this.pos[0],this.pos[1],this.radius,0,2*Math.PI,!0),e.fill()}move(){let e=[this.pos[0]+this.vel[0],this.pos[1]+this.vel[1]];this.game.isOutOfBounds(e)&&!0===this.escape?(this.pos=e,this.remove()):this.game.isOutOfBounds(e)||(this.pos=e)}remove(){this.game.remove(this)}didCollideWith(e){var t,s;return(t=this.pos,s=e.pos,Math.sqrt(Math.pow(t[0]-s[0],2)+Math.pow(t[1]-s[1],2)))<this.radius+e.radius}collideWith(e){}};var a=class extends r{constructor(e){super(e),this.pos=e.pos,this.radius=15,this.vel=e.vel||[0,0],this.color="pink",this.escape=!1,this.oldPos=[0,0],this.teleport=!1,this.warpDelay=this.warpDelay.bind(this)}draw(e){const t=document.getElementById("ship");e.drawImage(t,this.pos[0]-20,this.pos[1]-15,40,30)}moves(e){switch(e){case"i":this.vel=[0,-5];break;case"k":this.vel=[0,5];break;case"j":this.vel=[-5,0];break;case"l":this.vel=[5,0]}}angleLeft(e){switch(e){case"i":this.vel=[-5,-5];break;case"k":this.vel=[-5,5]}}angleRight(e){switch(e){case"i":this.vel=[5,-5];break;case"k":this.vel=[5,5]}}angleUp(e){switch(e){case"j":this.vel=[-5,-5];break;case"l":this.vel=[5,-5]}}angleDown(e){switch(e){case"j":this.vel=[-5,5];break;case"l":this.vel=[5,5]}}warp(e,t){if(!1===t){let e=document.getElementById("warp-sound");e.volume=.2,e.play()}!function(e,t){switch(e){case"i":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[1]+=-150,e[1]<0&&(e[1]=0),e[1]>500&&(e[1]=500),t.pos=[1e3,0],t.warpDelay(e)}break;case"k":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[1]+=150,e[1]>500&&(e[1]=500),e[1]<0&&(e[1]=0),t.pos=[1e3,0],t.warpDelay(e)}break;case"j":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=-200,e[0]<0&&(e[0]=0),t.pos=[1e3,0],t.warpDelay(e)}break;case"l":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=200,e[0]>750&&(e[0]=750),t.pos=[1e3,0],t.warpDelay(e)}break;case"ji":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=-120,e[1]+=-120,e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),t.pos=[1e3,0],t.warpDelay(e)}break;case"li":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=120,e[1]+=-120,e[0]>750&&(e[0]=750),e[1]<0&&(e[1]=0),t.pos=[1e3,0],t.warpDelay(e)}break;case"lk":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=120,e[1]+=120,e[0]>750&&(e[0]=750),e[1]>500&&(e[1]=500),t.pos=[1e3,0],t.warpDelay(e)}break;case"jk":if(!1===t.teleport){let e=t.pos.slice();t.teleport=!0,t.oldPos=t.pos,e[0]+=-120,e[1]+=120,e[0]<0&&(e[0]=0),e[1]>500&&(e[1]=500),t.pos=[1e3,0],t.warpDelay(e)}}}(e,this)}warpDelay(e){window.setTimeout(()=>{this.pos=e},600)}stops(e){switch(e){case"i":case"k":this.vel[1]=0;break;case"j":case"l":this.vel[0]=0}}};var h=class extends r{constructor(e){super(e),this.color="white",this.radius=25,this.pos=i(),this.escape=!0}draw(e){let t=document.getElementById("debris");e.drawImage(t,this.pos[0]-30,this.pos[1]-33,63,63)}collideWith(e){return e instanceof a&&(this.vel[1]=this.vel[1]+Math.floor(e.vel[1]/3),e.remove(),!0)}};var o=class extends r{constructor(e){super(e),this.radius=3,this.vel=[-8,0],this.pos=i(),this.escape=!0}draw(e){e.fillStyle="rgba(255, 255, 255, 0.8)",e.beginPath(),e.arc(this.pos[0],this.pos[1],this.radius,0,2*Math.PI,!0),e.fill()}};var n=class{constructor(){this.pos=[0,700],this.score=0}increment(){this.score+=1}reset(){this.score=0}draw(e){e.fillStyle="white",e.textAlign="right",e.font="10px scream_when_youre_ready_to_Rg",e.fillText(this.score,700,20)}};var l=class{constructor(){this.num_debris=0,this.debris=[],this.bonus=1,this.num_stars=12,this.stars=[],this.ships=[],this.over=!1,this.end_position=[0,0],this.frameNums={rocket:0,explosion:0,warp:0},this.width=750,this.height=500,this.score=new n,this.timers=[],this.intervals=[],this.debrisInterval,this.endRendered=!1,this.muted=!0,this.add=this.add.bind(this),this.step=this.step.bind(this),this.draw=this.draw.bind(this),this.addStar=this.addStar.bind(this),this.addDebris=this.addDebris.bind(this),this.incrementNumDebris=this.incrementNumDebris.bind(this)}start(){this.timers.push(setTimeout(()=>{this.num_debris=3},3e3)),this.timers.push(setTimeout(this.addDebris,1e4)),this.addStar(),this.debrisInterval=setInterval(this.incrementNumDebris,1e4),this.intervals.push(this.debrisInterval),this.intervals.push(setInterval(this.incrementScore,10))}reset(){this.timers.forEach(e=>{clearTimeout(e)}),this.intervals.forEach(e=>{clearInterval(e)}),this.score.reset(),this.num_debris=0,this.debris=[],this.bonus=1,this.ships=[],this.stars=[],this.endRendered=!1,this.over=!1,this.frameNums={rocket:0,explosion:0,warp:0},this.score=new n}incrementNumDebris(){this.num_debris+=1}incrementBonus(){this.bonus+=1}add(e){if(e instanceof h)this.debris.push(e);else if(e instanceof a)this.ships.push(e);else{if(!(e instanceof o))throw new Error("unknown type of object");this.stars.push(e)}}addDebris(){const e={vel:[Math.floor(-2*Math.random()-3),[-1,0,1][Math.floor(3*Math.random())]],game:this};this.add(new h(e))}addStar(){if(this.stars.length<this.num_stars){const e=new o({game:this});this.add(e)}this.timers.push(setTimeout(this.addStar,110))}addShip(){const e=new a({pos:[150,250],game:this});return this.add(e),e}allObjects(){return[].concat(this.debris).concat(this.ships).concat(this.stars)}allDescructableObjects(){return[].concat(this.debris).concat(this.ships)}draw(e,t){if(e.clearRect(0,0,this.width,this.height),t.clearRect(0,0,this.width,this.height),!1===this.over&&this.score.draw(e),!0===this.over&&this.frameNums.explosion<34)!function(e,t,s){let i=Math.floor(s/6);const r=document.getElementById("explosion");return{0:()=>t.drawImage(r,0,0,32,32,e[0]-60,e[1]-15,64,64),1:()=>t.drawImage(r,32,0,32,32,e[0]-60,e[1]-15,64,64),2:()=>t.drawImage(r,64,0,32,32,e[0]-60,e[1]-15,64,64),3:()=>t.drawImage(r,96,0,32,32,e[0]-60,e[1]-15,64,64),4:()=>t.drawImage(r,128,0,32,32,e[0]-60,e[1]-15,64,64),5:()=>t.drawImage(r,160,0,32,32,e[0]-60,e[1]-15,64,64),6:()=>t.drawImage(r,192,0,32,32,e[0]-60,e[1]-15,64,64)}[i]}(this.end_position,e,this.frameNums.explosion)(),this.frameNums.explosion+=1;else if(this.ships.length>0&&!1===this.over){!function(e,t,s){let i=Math.floor(s/9);const r=document.getElementById("rocket-fire");return{0:()=>t.drawImage(r,0,0,128,128,e[0]-68,e[1]-50,100,100),1:()=>t.drawImage(r,0,128,128,128,e[0]-68,e[1]-50,100,100),2:()=>t.drawImage(r,0,256,128,128,e[0]-68,e[1]-50,100,100),3:()=>t.drawImage(r,0,384,128,128,e[0]-68,e[1]-50,100,100)}[i]}(this.ships[0].pos,e,this.frameNums.rocket)(),this.frameNums.rocket+=1,this.frameNums.rocket>33&&(this.frameNums.rocket=0)}if(this.ships.length>0&&!0===this.ships[0].teleport){let t=this.ships[0];!function(e,t,s){let i=13-Math.floor(s/3);const r=document.getElementById("teleport-swirl");return{0:()=>t.drawImage(r,0,0,140,140,e[0]-40,e[1]-18,70,40),1:()=>t.drawImage(r,420,0,140,140,e[0]-40,e[1]-18,70,40),2:()=>t.drawImage(r,840,0,140,140,e[0]-40,e[1]-18,70,40),3:()=>t.drawImage(r,280,140,140,140,e[0]-40,e[1]-18,70,40),4:()=>t.drawImage(r,700,140,140,140,e[0]-40,e[1]-18,70,40),5:()=>t.drawImage(r,140,280,140,140,e[0]-40,e[1]-18,70,40),6:()=>t.drawImage(r,560,280,140,140,e[0]-40,e[1]-18,70,40),7:()=>t.drawImage(r,0,420,140,140,e[0]-40,e[1]-18,70,40),8:()=>t.drawImage(r,420,420,140,140,e[0]-40,e[1]-18,70,40),9:()=>t.drawImage(r,840,420,140,140,e[0]-40,e[1]-18,70,40),10:()=>t.drawImage(r,280,560,140,140,e[0]-40,e[1]-18,70,40),11:()=>t.drawImage(r,700,560,140,140,e[0]-40,e[1]-18,70,40),12:()=>t.drawImage(r,140,700,140,140,e[0]-40,e[1]-18,70,40),13:()=>t.drawImage(r,560,700,140,140,e[0]-40,e[1]-18,70,40)}[i]}(t.oldPos,e,this.frameNums.warp)(),this.frameNums.warp+=1,this.frameNums.warp>39&&(this.frameNums.warp=0,t.teleport=!1)}this.allObjects().forEach(s=>{s instanceof o?s.draw(t):s.draw(e)})}moveObjects(){this.allObjects().forEach(e=>{e.move()})}isOutOfBounds(e){return e[0]<0||e[0]>this.width||e[1]<0||e[1]>this.height}checkCollisions(){let e=this.allDescructableObjects();for(let t=0;t<e.length;t++)for(let s=0;s<e.length;s++)if(t!==s){const i=e[t],r=e[s];if(i.didCollideWith(r)&&(i.collideWith(r),r instanceof a||i instanceof a)){if(!1===this.muted){let e=document.getElementById("explosion-sound");e.play(),this.timers.push(setTimeout(()=>{e.pause(),e.currentTime=0},1e3))}this.over=!0,this.end_position=r.pos}}}remove(e){if(e instanceof h)this.debris.splice(this.debris.indexOf(e),1);else if(e instanceof a)this.ships=[];else{if(!(e instanceof o))throw new Error("unknown type of object");this.stars.splice(this.stars.indexOf(e),1)}}step(){this.moveObjects(),this.checkCollisions(),this.debris.length<this.num_debris&&this.addDebris(),!1===this.over&&this.score.increment()}gameOver(e){clearInterval(this.debrisInterval),this.timers.push(setTimeout(()=>{this.endRendered=!0,e.gameOverScreen(this.score.score)},1500))}};var d=class{constructor(e){this.ctx=e.ctx,this.game=e.game,this.overRendered=!1,this.ctxStar=e.ctxStar,this.title=document.getElementById("title-screen"),this.gameOver=document.getElementById("game-over"),this.controls=document.getElementById("controls"),this.finalScore=document.getElementById("final-score")}titleScreen(){this.ctx.clearRect(0,0,this.game.width,this.game.height),this.ctxStar.clearRect(0,0,this.game.width,this.game.height),this.title.style.display="block"}gameOverScreen(e){!1===this.overRendered&&(this.overRendered=!0,this.finalScore.innerText+=e,this.gameOver.style.display="block")}controlsScreen(){this.controls.style.display="block"}clearControls(){this.controls.style.display="none"}clearMenus(){this.title.style.display="none",this.overRendered=!1,this.finalScore.innerText="Score:",this.gameOver.style.display="none"}};var c=class{constructor(e,t,s){this.ctx=t,this.ctxStar=s,this.game=e,this.moves=["i","j","k","l"],this.ship,this.paused=!1,this.keysPressed={},this.animationFrame,this.animate=this.animate.bind(this),this.pause=this.pause.bind(this),this.mute=this.mute.bind(this),this.pauseTime=0,this.controlsShown=!1,this.menu=new d({ctx:t,ctxStar:s,game:e}),document.addEventListener("keydown",e=>{if("u"===e.key){if(!0===this.game.over&&!0===this.game.endRendered)return void this.start();if(!1===this.game.over)return void this.start()}else"o"===e.key?this.pause():"r"===e.key?this.showControls():"q"===e.key&&this.mute();!0===this.keysPressed.f?this.ship.warp(e.key,this.game.muted):!0===this.keysPressed.j?("f"===e.key&&(!0===this.keysPressed.i?this.ship.warp("ji",this.game.muted):!0===this.keysPressed.k?this.ship.warp("jk",this.game.muted):this.ship.warp("j",this.game.muted)),this.ship.angleLeft(e.key)):!0===this.keysPressed.l?("f"===e.key&&(!0===this.keysPressed.i?this.ship.warp("li",this.game.muted):!0===this.keysPressed.k?this.ship.warp("lk",this.game.muted):this.ship.warp("l",this.game.muted)),this.ship.angleRight(e.key)):!0===this.keysPressed.i?("f"===e.key&&this.ship.warp("i",this.game.muted),this.ship.angleUp(e.key)):!0===this.keysPressed.k?("f"===e.key&&this.ship.warp("k",this.game.muted),this.ship.angleDown(e.key)):this.ship&&this.ship.moves(e.key),this.keysPressed[e.key]=!0}),document.addEventListener("keyup",e=>{this.ship&&this.ship.stops(e.key),delete this.keysPressed[e.key]})}animate(){!0!==this.paused&&(!0===this.game.over&&this.game.gameOver(this.menu),this.game.step(),this.game.draw(this.ctx,this.ctxStar),this.animationFrame=requestAnimationFrame(this.animate))}start(){cancelAnimationFrame(this.animationFrame),this.keysPressed={},this.game.reset(),this.menu.clearMenus(),this.paused=!1,this.ctx.clearRect(0,0,this.game.width,this.game.height),this.ctxStar.clearRect(0,0,this.game.width,this.game.height),this.ship=this.game.addShip(),this.game.start(),this.animationFrame=requestAnimationFrame(this.animate)}pause(){!0===this.paused?(this.paused=!1,this.animate(),this.pauseTime=0):(this.paused=!0,cancelAnimationFrame(this.animationFrame))}showControls(){!0===this.controlsShown?(this.menu.clearControls(),this.controlsShown=!1,this.pause()):(this.menu.controlsScreen(),this.controlsShown=!0,this.pause())}mute(){if(!1===this.game.muted){this.game.muted=!0;let e=document.getElementsByTagName("AUDIO");Object.values(e).forEach(e=>{e.pause()})}else{this.game.muted=!1,document.getElementById("game-music").play()}}};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("game-canvas").getContext("2d"),t=document.getElementById("star-canvas").getContext("2d"),s=new l;new c(s,e,t).menu.titleScreen()}))}]);
//# sourceMappingURL=bundle.js.map